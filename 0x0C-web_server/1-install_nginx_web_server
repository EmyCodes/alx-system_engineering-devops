#!/usr/bin/env bash
#   Insralling Nginx
#   Listening at port 80
#   Querying nginx

# Update Ubuntu
sudo apt-get -y update

# Upgrade Ubuntu
sudo apt-get -y upgrade

# Install nginx
sudo apt-get install nginx

# Handling Firewall
sudo ufw allow 'Nginx HTTP'

# Querying Nginx
# echo "Hello World!" | sudo tee /var/www/html/index.html

# Start Web Server
sudo service nginx start
# Configure nginx to listen on port 80
sudo sed -i 's/listen\ 80\ default_server/listen\ 80/' /etc/nginx/sites-available/default

# Restart nginx
sudo service nginx restart

# Test nginx
if curl http://localhost/ | grep "Hello World!"; then
    echo "Nginx installed and configured successfully"
else
    echo "Nginx installation or configuration failed"
fi
